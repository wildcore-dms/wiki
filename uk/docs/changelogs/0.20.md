# Версія 0.20 (12.2023)

## Новий функціонал
- **Нові метрики Prometheus**
    - **analytics_duplicated_ont_ident_ifaces** - відображає ОНУ з інтерфейсом 
    - **analytics_duplicated_ont_ident** - відображає ОНУ з підрахунком кількості дублів
    - **analytics_duplicated_mac_addresses_ifaces** - відображає МАК з інтерфейсом
    - **analytics_duplicated_mac_addresses** - відображає МАК з підрахунком кількості дублів
    - **card_status_admin_status** - відображає адмін стан карти (ZTE/Huawei)
    - **card_status_cpu_load** - відображає навантаження CPU карти (ZTE/Huawei)
    - **card_status_memory_usage** - відображає навантаження RAM карти (ZTE/Huawei)
    - **card_status_oper_status** - відображає стан карти (ZTE/Huawei)
    - **card_status_temperature** - відображає температуру карти (ZTE/Huawei)
    - **unregistered_ont** - відображає незареєстровані ОНУ 

- **Можливість отримання внутрішніх подій системи** - дивіться приклади в `/opt/wildcore-dms/examples`
- **Для ZTE EPON додано можливість вибору опису з блоку $$** - параметр `"epon_description_block_index": 1`, який дозволяє змінити блок для відображення між '$$' (варианти - 1 чи 2)   
- **Аналітика: дублікати MAC-адресів**
- **Аналітика: дублікати ОНУ**
- **Аналітика: рівні сигналу ОНУ + віджет**
- **Можливість розділювати статистику інтерфейсів в розрізі фізичний порт/ОНУ**, в налаштуваннях користувача з'явився новий параметр 
- **В налаштуваннях системи з'явилась таблиця з детальною статистикою по типу інтерфейсів в системі**
- **Карта: додано відображення ОНУ**
- **Карта: додано відображення лінків з можливістю редагування проходження лінку**
- **Очистка лічильників та ребут світча(Huawei/Edgecore)**
- **Зміна опису ОНУ на C-Data FD12xx/FD16xx**  
- **Додано блок з інформацією про проблеми доступу до обладнання**
- **Відображення трафіку і помилок на фізичних портах (C-Data/ZTE/BDcom)** 

## Зміни

- RoadRunner версії v2023.3.0-rc.1
- Відключено автоматичну діагностику кабелю за замовчуванням. Щоб ввімкнути(як було раніше), необхідно додати параметр `"enable_auto_cable_diag": true` в модель чи пристрій
- Змінено права ролей користувача
- При видаленні ОНУ - тепер інтерфейс видаляється також з БД wildcore   
- Huawei MAxxxx - прискорена швидкість опитування
- Прискорили роботу з консольными командами
- BDcom P3600 series додано в Oxidized
- Huawei SmartAX series додано в Oxidized



## Виправлені помилки
  - MikBill: при синхронізації абонентів, якщо на один інтерфейс попадає декілька абонентів, тепер не зберігає записів (раніше записувало когось)
  - Виправлено час падіння ОНУ на BDcom
  - Виправлено управління компонентами
  - Виправлено відображення кількості інтерфейсів в дашборді пристроїв
  - Віджет статистики помилок виклику обладнання 
  - Виправленно отримання кешованих результатов для модулів onts_serial, unregistered_onts (при використанні "хака" sn_as_ascii)
  - Виправлено відображення блоку з рівнями сигналу на оффлайн ОНУ
  - Фікс по відправці сповіщень (resolved могло бути раніше, чим alert)
  - FD12xx/FD16xx - виправленно опитування FDB
  - Dlink DGS-31xx - виправленно отримання інтерфейсів
  - Виправлено перехід між пристроями через лінк чи пошук (не вся інформація оновлювалась)


### Скріншоти
#### Карта
![](../assets/0_20/map_all.png)    

* 1 - пристрій (світч/ОЛТ)
* 2 - лінк 
* 3 - ОНУ
* 4 - попап з додатковою інформацією
* 5 - фільтри

![](../assets/0_20/map_grouping.png)    
_* лінки не групуються_    
![](../assets/0_20/map_edit_link.png)
![](../assets/0_20/link_popup.png)

#### Трафік та помилки на фіз портах
![](../assets/0_20/interface_counters.png)
![](../assets/0_20/interface_counters2.png)

#### Статистика інтерфейсів
![](../assets/0_20/stat_on_device.png)
![](../assets/0_20/stat_on_device_dashboard.png)
![](../assets/0_20/stat_config.png)

#### Детальна статистика по інтерфейсам
![](../assets/0_20/interface_detailed_stat.png)

#### Віджет рівню сигналів
![](../assets/0_20/widget_onts.png)

#### Сторінка рівню сигналів 
![](../assets/0_20/onts_signal_strength.png)

#### Метрики Prometheus 
![](../assets/0_20/metrics_1.png)
![](../assets/0_20/metrics_2.png)

 