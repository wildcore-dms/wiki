# Імпорт пристроїв з CSV-файлу
 
## Опис

Команда `wca device:import` дозволяє імпортувати пристрої в Wildcore з CSV-файлу.    
Це зручний інструмент для швидкого додавання великої кількості обладнання.

Під час імпорту кожен пристрій проходить перевірку на доступність. Також визначається його модель згідно з **`model_key`** у Wildcore.
!!! warning "Обладнання, яке не підтримується чи недоступне в даний час, буде проігноровано"

!!! warning "Якщо в CSV-файлі буде вказано `model_key`, обладнання буде додано без спроби автоматичного визначення моделі та перевірки доступності"
При імпорті можуть бути автоматично створені доступи для пристроїв, якщо таких не було знайдено в системі Wildcore.

## Формат CSV-файлу

Файл повинен містити дані в наступному форматі:
```
<IP>,<Login>,<Password>,<Public community>,<Private community>,<Name|can be empty>,<wildcore model key (not required)>
```   

* **IP** - IP-адреса пристрою.
* **Login** - Логін для доступу.
* **Password** - Пароль для доступу.
* **Public community** - Значення `public community` SNMP.
* **Private community** - Значення `private community` SNMP.
* **Name** - Ім'я пристрою (може бути порожнім).
* **wildcore model key** - Ключ моделі пристрою в Wildcore (не обов'язковий).

## Консольна команда `device:import`
  
**Опис:**    
Імпортує пристрої з CSV-файлу.

**Використання:**   
`wca device:import [options] [--] <path>`

**Аргументи:**   

* **`<path>`** - Шлях до файлу.

**Опції:**    

* ` -g, --group-id[=GROUP-ID]` - ID групи, в яку додати нові пристрої. За замовчуванням: `"-1"`.
* ` -s, --separator[=SEPARATOR]` - Розділювач полів у CSV-файлі. За замовчуванням: `","`.
* ` -h, --help` - Відобразити довідку для команди.
* ` -q, --quiet` - Не виводити жодних повідомлень.
* ` -V, --version` - Відобразити версію програми.
* ` -n, --no-interaction` - Не ставити інтерактивних запитань.
* ` -v|vv|vvv, --verbose` - Збільшити деталізацію повідомлень.

---

## Покрокова інструкція

!!! warning "Через особливості роботи системи в Docker, необхідно спочатку скопіювати підготовлений файл всередину контейнера, а потім виконати команду імпорту"

1.  Підготуйте файл `devices.csv` згідно з форматом, описаним вище.

2.  Скопіюйте файл у контейнер Docker:
    ```bash
    sudo docker cp ./devices.csv wca:/tmp/devices.csv
    ```

3.  Виконайте команду імпорту:
    ```bash
    wca -v device:import -g-1 /tmp/devices.csv
    ```
    * **`-v`**: Вмикає детальний вивід, щоб бачити прогрес.
    * **`-g-1`**: Вказує ID групи, в яку будуть додані пристрої. Значення `-1` означає, що пристрої будуть додані до групи з ID -1 (Ця група існує за-замовчуванням). Ви можете замінити його на ID потрібної групи.
    * **`/tmp/devices.csv`**: Шлях до файлу всередині контейнера.