*На данный момент предоставляется единственный способ установки и работы - внутри докер с установкой через wca-tool.*       

## Установка
Выполните команду 
```shell
sudo wca-tool --key=YOUR_AGENT_KEY install 
```
*YOUR_AGENT_KEY - ключ агента, который вы получили при обращении(см. требования)*
Процесс установки занимает некоторое время (обычно 10-15 минут).   

В случае успешной установки - будет отображено сообщение
```shell
WildcoreDMS success installed!
Now, you can use wildcoreDMS by URL: http://<service ip|domain>:8088
Default login/password - admin/admin

You can change some parameters in /opt/wildcore-dms/.env file, as listen ports for example
```

После установки перейти в веб-панель.    
По-умолчанию панель доступна на порту `8088`, а дефотлный логин/пароль для входа - admin/admin.   


## Частые проблемы при установке
### Не установлен docker-compose-plugin 
Обычно ошибка выглядит следующим образом:       
![](assets/no-docker-compose-plugin.jpg)

Требуется, что бы системе был установлен docker-compose как плагин к докеру, а не как отдельная утилита.    

Что бы устранить проблему:

1. Установите пакет `docker-compose-plugin` для вашей ОС(смотрите инструкции установки в официальной документации docker - [docs.docker.com](https://docs.docker.com/engine/install/))
2. Проверьте, что он действительно работает - команда `docker compose version` должна возвращать версию плагина.
3. Продолжите установку wildcoreDMS командой ```sudo wca-tool update```    

### Агент отключен     
После успешной установки, при попытке входа - отображается сообщение 
![](assets/agent-disabled.png)     
Данная проблема может быть связана с установкой системы на "слабые" сервера (меньше, чем указано в рекомендациях)         
Решается следующим образом: 

1. Ждем минут 5-10 (должна запустится СУБД. Можно так же проследить за запуском командой `docker logs -f wca-db`)
2. Выполняем команду `docker exec -it wca composer install`
3. Выполняем команду `wca migration:migrate --up *:*`
   1. Если в процессе выполнения команды получили связанную с подключением к БД (например, Connection refused) - возвращаемся к пункту 1.
4. Выполняем команду `wca system:check`
5. Пробуем повторно войти через веб-интерфейс 


### Ошибки связанные с сетью 
Может проявляться записями в логах типа: `Connection refused`, `Connection timeout`, `Forbidden`    

Рекомендуемые действия: 

1. Прочитать из логов, куда именно производится попытка подключится   
2. Удостоверится что с сервера данный адрес доступен (проверить тем же curl доступность в случае HTTP)    
3. Если с ответом все хорошо - проверить, что все хорошо с докером(установлен по официальной доке, не было старых версий и установлена версия именно под вашу систему)

После устранения проблемы доустановку можно выполнить командой `wca-tool update`.
    
 